---
{"dg-publish":true,"permalink":"/notes/data-hazard-in-cpu/"}
---




# Data Hazard in CPU
Data hazard is a type of [[Notes/Pipeline Hazards in CPU\|Pipeline Hazards in CPU]] that occur due to dependencies of data between two or more instructions.

There are 3 main types of data hazards:
- **R**ead **A**fter **W**rite - this is a *True-dependency* because we have to read the right data (after it is modified).
- **W**rite **A**fter **R**ead - also called *Anti-dependency* (called like this because it's the opposite of **RAW**). This can easily be resolved using [[Notes/Register Renaming\|Register Renaming]].
- **W**rite **A**fter **W**rite - also called *False-dependency*.

To overcome some of these we can either:
1. Stall - Let the hardware detect hazard and add stalls if needed. The problem with that is that it is SLOW. To overcome that we use *Forward*.
2. Forward - have a bypass fetching the relevant data to the desired [[Notes/CPU Pipeline\|pipeline]] stage. 
   Problems:
	   - Need to add extra logic ([[Mux\|Muxes]] in front of [[Notes/Arithmetic Logic Unit\|ALU]] for example, and *Forwarding Unit*).
	   - Not always possible to forward. For example when reading a register right after load from Memory (In MIPS read of registers is in decode (stage 2) but load from memory is in Memory (stage 4)) - The data we need is not yet in the [[Notes/CPU Pipeline\|Pipeline]].
	     ![Pasted image 20230102180829.png](data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMwAAABcCAYAAAAiRFqxAAAdzElEQVR4nO2ce1xVVd7/P3ufK5fDAVFuIqDgJUBFtETz7vho5iXTCTPHJstLT6aNmvN0mXQ0a3JqUicvOWP1jJY0Zk84pamJmhp5Ce+oKHIRJUlBBORy9t6f3x8njp5B4BwuWfNb79dr/eFe67vWZ529P2vvdUGJJCEQCFxCvtsCBIJfEsIwAoEbCMMIBG4gDCMQuIEwjEDgBsIwAoEbCMMIBG4gDCMQuIEwjEDgBsIwAoEbCMMIBG6gd7UgSeTk5KCoqMjpeps2bdCyZcsmF/aLIO978PQFMPcyYDRAatcGUucOgI/33VYGkrhw4QIyMzORm5sLkoiIiEBMTAxCQkJqjVMUBWfOnMGZM2dQWFiIiIgIdO7cGcHBwW61r6oqMjMz0bJlS7Ro0aKx3XGCJL7//nvk5ORAlmXcd999dZbNycmB0Wiss9/uNO4ShYWF7NChAz08PBzJy8uLq1evdrWK/xxUler//h+VoD5U9NFUpE72ZOpMJSGRWn7BXZVXXl7OWbNm0dfXl7IsEwABUKfTMTQ0lDt27Kg1dsmSJbRYLJQkyRETFRXFM2fOuKXhgw8+oK+vL0eNGsXKysrGdokkeenSJS5ZsoTdu3enn58fTSYTJ06cWGfMiRMn6O/vz/DwcJ49e7bRGlw2TElJCUeMGMGIiAhGRETQw8ODsizznXfeabSIu4H6wl+omLtQMcQ6J2MsFWsPKjEPUp21mNq5nBqx2idfUvGMoyLfQyV2BNXHf0919H9TsXS3G6fraGqX755p1qxZQ51OR1mWGR8fz0mTJnH8+PEMCwsjALZs2ZJHjx51itE0jevXr6fZbKYkSezbty9/+9vfMjIykgDYsWNH5ubmutT+0aNH6efnRwCcPHkybTYbSTI1NZUBAQE0GAw1kqenJ9u0acOxY8dy27ZtVBTFqc7qB7/a/NXpscceq1NLTk4OQ0NDCYCjRo1iRUWFG79kTVw2zL/Tv3//X7Zh/udNKn73UdHH2B9yrzgqvvfakyX+1vV7hlP74ZojTquopBI/horUieqYZ6mp6q28s1lUgvtS0UdTff/Tu9EtkuTHH3/MVq1a8YUXXnC6XlJSwi5dulCSJL766qtOeaWlpezWrRslSeKECRNYVVVFkszNzWWbNm0IgAsXLqy3bU3TOHXqVAJgcHAwc3JuDTipqakMCQmh2WwmABoMBlqtVlqtVvr4+NBkMhEATSYTN2/e7FRvdnY2IyMjGRwczIceeoh9+/Z1yTAkuWnTJppMJnp4eHDXrl31lq+L/28Nw4pKajmXqMSOpKKLprr0f6ll5dnT6Uyqn2yj0rofFfkeqv/zliNMu3adSthAKvoYal8fqlGt+tjzdjPN/tNP2RsnFEVhfn6+46G/nfHjxxMAn3vuOafrhw8fpre3N4OCgpwecpJcunQpZVlmjx496m07MzOTLVu2pCzL/POf/+yUp2kaL1++zJkzZ1KSJD7wwAPMyspiVlYWz507x/3793PIkCEEwLi4OJaUlDjFFhQUsLi4mCQ5c+ZMlw1TWlrK3r17EwB79uzpVK+7NMsqWXFxMfr27Quj0QiDwQCj0YihQ4fi5s2b1fMmzJ8/H56enjAYDDAYDAgJCcGRI0eaQ86dMRkhhYUARj0gAWjpBymitT11agd5zK8gjRgIkODew6CiAgCkFlbIm5ZD3rwS0v3xznUWFYPp5wBJAqx3b+Kv0+kQFBQEg8EAVVVRUFCA3NxcJCcn46uvvoJOp0Pnzp2dYg4dOoSysjJEREQgICDAKS8hIQFGoxFZWVl1tksSK1aswNWrV2G1WvHQQw855UuShODgYFitVgCAh4cHIiIiEBERgaioKPTu3RuzZ88GAGRmZqKgoMAptlWrVvDx8XH79/Dy8sKjjz4KSZJw6NAhHDp0yO06qnF5lcwdKioqkJWVBZvN5riWnp6OyspKeHp6giROnjyJ8vJyR/7Vq1dx5cqV5pDTIHgxH0z5FgAgRYVB0usceVKP2JoB10ugjnkWOHbWbsaBCT+V1DpZsGABVq1aBVVVUVZWBpvNhi5dumD06NFO5S5fvgySsFqtkGXncdRisUCv16OioqLOtkpKSrB161YAQKdOndC6dWu3tKqqio8++ggA0KJFC/j5+bkVXxfDhg2Dj48PiouL8e2332LgwIENqqdZDBMYGIh9+/Zh7NixSEtLw9ChQ/HOO+9g3bp1WLNmDbp06YK1a9diwIABmDVrFvR6PZKTkzFs2LDmkFM/GoENX0A7kg5U2oBz2eC+NOBmORAZBumlp+sMZ85lcMYiYO9h+/Ly76dA6tnlJxJfO6qq4urVqyguLoaiKADsI3XPnj1hNBqdymqaVms9kiS51N61a9eQn58PAOjXrx88PDzqLH/y5EnMnTsXqqoiPz8f33zzDS5evAiTyYSXXnqpSQ0THh6OyMhIpKWl4eTJkw2up1kMAwAREREYPnw40tLSkJ2dDbPZjBUrViAjIwMXLlzArFmzkJ+f79gf6Nu3b3NJqR8S3LIH2LLH+Xpse8ifLIPUPryWOIB5+dBGPg2czAD0eki/nwJ5/jPNr9kFdDodVq1ahTfeeAOHDh3CwoUL8c0332Dt2rXo2LEj5syZ4yjrqinqorS01PFV0b59+3rLZ2Rk4K233nK6ZrVasWrVKiQmJjZaz+0YDAYEBQUBsH/NNJRm3ekfNWoUzGYz8vPz8e677+L8+fMAgPLycixevBipqakAgCFDhsDLy6s5pdSNJAG/HgZp4UxIc54AfH/8TlY1oEqpNUzbsQ9av4l2s/haIL23GPILU38i0a7j4+ODwYMHY8eOHZg6dSo0TcPKlSudNqGrR/ObN2/WeNtUVlZC0zQYDIYm1RUbG4tFixZh/vz5TnOq0tLSJm2nmupBoTGDQ7MapnPnzggNDUVpaSlWrFgBTdMQHh4OvV6Pbdu24eDBgzAajRgxYkSTjHANRpYgjRoE+eWnIf95HuRPlgEhAcDpTGhPvAAUXHMuX2UDN3wOPvY8kHMZaNcG8vo/Q35sJGAy3rmNnwFGoxG//vWvAQAFBQVOc8auXbvCbDYjNzcXJSUlTnHp6emoqqqqd7ffy8vLYarMzMx69XTo0AEvv/wyFixYgO3bt2PIkCEoKSnB7373O2zfvt3d7tWJoiiOz0V/f/8G19OshjGbzejatSs0TUNRURHMZjPWrFmDjh07oqqqCjdv3oSvry+6devWnDLcRhrYE/KWNUBLPyAtHeqsxYDN/qahpkFb8A60J14Erl0HoiMhb18LaXh/+5vKRZKTkxEWFoawsDC88MILzdWVGpw7dw6AfYWqerUKALp3747Q0FDk5eXh/fffd1y/efMmli9fDkVRMGDAgDrrbtmypcNUe/bsqXeR4HaCgoLw2WefYeDAgSgrK8PTTz+NS5cuudO1OsnJyXGYOCYmpsH1uDSHqaiowFtvvYW0tDTwx//GLD09HSTx97//HTt37gRgH8GmTJmCwYMHO2J79OiBTZs2AbCPKL169cKYMWNw6tQpAEBYWFiDlgobCz/7CvzwX0DWJUAjuHwdtM0pwKTRkB8cAKlzB0ivz7ZP5jdug1pYDOm/+gA2BXzjbwAJ6PVAUCtoc5fcqriiEjiRAemPz0KePLbW9nfv3o2LFy/C19cXY8fWXs5dsrKyMGbMGOj1egwbNgytW7eGTqfDjRs3cPz4cfzrX/+CLMuYMGGC45sesH+2PfXUU3jxxRexYMEC5OfnIyoqCps3b8bBgwfh4+ODyZMn19m2t7c3hg4ditOnT+P06dPIy8tDVFSUIz8nJwd//OMfceDAAZDEgQMH8PDDDyM+Ph7PP/88PD09sXTpUgwfPhzZ2dkYMWIE4uPj8cYbb0BRFLzyyiuO+ceJEycAAHv37sXDDz8MwD7/eemll5zaBOzL3du2bcONGzcgyzJ69erV8B/Ylc2ay5cvMzAwsMaxhH9PkiRx8uTJTrE7duxw5M+bN4+apjEtLY1Go9FxdEK9bbf8p0KdMOfWGbDqJN9DZdxM53LPLrJflzpRiXuIyjMLa8bdIalPvVxr25qmsVevXpQkibNmzWrSfmVmZjI8PNzpDNntyWg0sn///iwsLKwRW1VVxcTEROp0OqcYHx8fJiUludT++fPn6efnR1mW+fbbbzvlJScnO3bzb0+tW7dmQcGto0QpKSn09vZ2nAY4cuQIv/76a3p4eNT5/MmyzPfff7+GprKyMsfGZffu3VlWVubmr3oLiaz/f75UVRXHjh1zrNXXhk6nQ7du3Zy+dUtLS7Fnzx6QRI8ePRAUFASbzYavv/4aN2/eRMeOHdGhQwfX3N2UZF8CT52zvymqkWVInTsCbW6NvCi8Dn57zL70HNnGXv7CxfrrbxMMqWunOzednY34+HiQxL59+xr1iXAn8vLycODAAaSmpiI3NxeVlZWwWCzo2LEj+vfvj549e8JkMt0x9saNG9i9eze2bt2KH374ATExMRg9ejTi4uJq7M/cCZKYNm0a/va3v6FNmzbYs2cP2rZtCwAoKytDamqq0/4bAISEhKBbt26O+lVVxb59+3Djxg1YrVYkJCRA0zTs37/fsfl9J8xmM3r16gVvb+dN440bN2LSpEnQ6XRITk52+gJymwZbTdBgVq5cSVmW+eyzz9Y4ZPifwLFjx+jr61vj8OXd4OLFiwwJCSEAjhw5stGHL8UfkP3EVFZW4tNPP0VYWBgWLlwInU5Xf9AvjM6dO2PlypUwmUy4fPlynZuizU1xcTGuXbuGoKAgvPnmm7W+WV2l2TYuBXeGJCIjI5GYmAhfX9+7LadZkCQJiYmJ6NKlC4KDg2ucKvgpiY6ORnp6Okwmk9tHde6ES3MYgUBgR3ySCQRuIAwjELiBMIxA4AbCMAKBGwjDCARuIAwjELiBMIxA4AbCMAKBGwjDCARuIAwjELiBMIxA4AbCMAKBGwjDCARuIAwjELiBMIxA4AbCMAKBGwjDCARuIAwjELiBMIxA4AbCMAKBGwjDCARuIAwjELiBMIxA4AbCMAKBGwjDCARuIAwjELiBMIxA4AbCMAKBGwjDCARuIAwjELiBMIxA4AbCMAKBGwjDCARuIAwjELiBMIxA4AbCMAKBGwjDCARuIAzTRCiKAlVVXS5fVFSErKwsKIrSjKoaDouKwaw84Geq726hv9sCXKWoqAjTp0/HmTNnAAAeHh7YsGED2rZt+5NrUVUVGRkZOHz4ML777jscPnwYeXl52LNnD8LDw2uNu3LlCpYtW4akpCRkZ2eDJKxWK4YMGYL58+cjNjb2J+zFnQRehbbsH2DSFiDnMkACPt6Q/ut+SK88Aym2/d3V1wD27t2LGTNm3DFPp9MhISEBf/nLX2A2m12rkL8QcnJy2Lp1axoMBgKgl5cX09PTG1zf6tWrabFY6OHh4ZQ8PT0ZEhLCESNGcOfOnayoqKgR+8wzz1CSJAJwpBYtWjArK6vW9srKyjh48GACoF6vp6+vL1u0aEGTyeSIb0x/SFI7l00lcggVj67OyTOOSoueVO4dR/Wv68niUlLT/k3gTaq/eoKK1ImKIYaK331U/HtSMXexX2vRk1r6+Ubpaygvvvhijfvk4eFBLy8vtmnThuPHj+d3333HqqqqGrGff/654x4ZjUanZDKZGBsby+LiYpe1/GIMo2kaMzIyuHr16iYxzFNPPeX0wN8pGQwGJiYmsqyszEnHqFGjHA/54MGDaTab6zXM2rVraTAY6Ovry48++oiXLl3ilStXuHv3bsbExBAAp0yZ0uD+kKS2Y/+tB7y2JN9DpdMD1NJOOcWqazdSMcZS8buX6kefk5eukFeuUdt9kErsSCpSJ6pT/tAofQ1l2LBh9d4ro9HIWbNmUfu3gaDaMFarlZ9//jm/+eYbR/r222+ZnZ1dI6Yu3DaMqqosKChgRkYGT58+zby8PNpsNpdiq6qqmJ2dzbNnzzI/P5+qqtZbPicnh2fOnGFubi5tNhv37t3bJIa5fv06v/zyS0ZFRVGWZc6bN49btmzhli1b+I9//IMTJ06kl5cX9Xo9V69e7RR77do1pqamsry8nLm5ufT396/TMJqmcdy4cQTAJ554osbvtW7dOup0Onbp0qXB/SFJKiq1/WlUH5trN0efCdS27LGnT7ZRfXkplfBB9rxhT5FVtmqBVMfOtJviiRdIm+JUrboumYo+hkqX0Y3T10Dy8/O5ceNGBgQE0Gg0cvny5dyyZQu/+OILrl27lqNHj6bBYKDRaGRycrJTbLVh/P39mZ+f32gtLhvGZrNx+fLljI+Pp7+/P318fGixWOjn58d+/foxMzPTqfyVK1c4YMAAhoeHs23btly0aBH79OlDX19fWiwW+vv7c/LkySwtLa3RlqZpTE1N5X333eco7+vry65du3LhwoVNYphqunXrRp1Ox/Xr19fo75NPPkkA7NevX62DgiuGIcn09HTOnTuXubm5NfKWL19OWZYZGxvbuM78iPqHZVTkTlQefrZGnpa8024Y673ULly8dT39PNW5S6jl1nyo1OXrqOiiqXQe2ST6GkJRURHDwsJoNpt56NAhp7yysjL279+fAJiYmOg0EN9umFOnTjE5OZkbNmzg6dOn3XqzVOOyYU6cOEGLxeJ4BZpMJvr7+1Ov1xMAg4KCeOzYMUf5w4cP09PT01G++pvfaDQ61TNy5EiWl5c74lRV5dKlS+nh4UEA1Ol09PPzc7RTnZrbMFevXuWAAQMIgKNHj671beiqYe6EpmncsmULAwMDCYCTJ09ucD9up1bDqCrVhSvthgm6n1p+QX0CqW7ZQyXwfvvbZ/KLTaKvIdRlmHPnzjEqKooAOH36dCcjVBtGkiTKsux4fmRZZq9evfjVV181zydZaWkpExMTOX78eH7xxReOCVZGRgbDwsIIgIsXL3aUV1WVO3fuZKdOnRwCx44dy+vXr1PTNG7cuJHe3t708vLi0aNHnTqo1+spSRKHDBnC7OxskuTFixc5bNgw6nS6JjeMLMt8/fXXeeTIEX799decP38+/f39CYAWi4X79u2rNb6hhlFVlfv373e04+/vz+PHjze6P+RthvnVE9SOplM7eJzae59Q6THWbhbdPVR/93p9AqntT6PSMsEe49+T2vGzTaKvIVQbxmQyccOGDTxy5AhTUlI4e/ZsWq1WAmCrVq2YkZHhFPfll186DbJBQUEMCwujxWKhJEkMDg7m+fOuL2a4NYdRVZUpKSmcN28eJ0yYwEcffZQzZsxgdHQ0AfD555+vEXP//fdTkiQ++eSTTpPnkpISRkdHU6/X87PPPiNJVlZW8oEHHiAADho0iIWFhU51VVRUcPz48U1umNomkiEhIdywYQMVRak1vqGGWb16teNGt2vXjt99912j+1KNwzB3mvR7dKU6+3VqRXWvDKmrk6hYe9hj2g2h9t3JJtPXEKoNU9u9atu2Lbdt21YjrrCwkDNmzOCiRYt44sQJVlRUUFEUnjp1inFxcQTA8ePH13mPb8flfZicnBw8/fTT2Lp1a61lSN7xuiRJSEhIgKenp9M1Wbbvm1Zv3lVWVuL8+fMwGAyYM2cO/Pz8nOoxmUxITExEUlKSq7JdQpIkREVFwd/fH1VVVTh16hSqqqrQu3dvDBkyBDqdrsnaKisrw7Jly7Bo0SJUVlaie/fuWLt2Lbp27dpkbTjw94XUPhzQCGbmAteuA8GtIE0cBclqqUXgTWjL1oGLVgJVNiA+BvLaVyF17dT0+hqALMuIiYmBl5cXysrKcPr0aWiahgceeAC9evWqUd7Pzw9//etfa1yPjo7G5MmTMXPmTKSkpKCwsBCtWrWqt32XDHPt2jU8+OCDSE9Ph06nw4ABA9CvXz+QREZGBrZv346rV6+6UlWdkISqqtDpdPD19b1jGYullhvdCGRZxksvvYTx48dD0zS89957mDlzJjZt2gRVVZGUlASj0djodioqKjB16lR8/PHHUFUVAwcORFJSEgICApqgF3egT3fISX8BAPDUOWgPTgOy8qCNmA455QNIHds5FWdFJTh1PvjPrYCqAgN6Qpf0FhDg3zz6GoDRaMS7776L+Ph42Gw2vPbaa/jTn/6EVatWwWg04u2333a5roiICAD2+1JeXu5SjEuG2b17N06dOgVPT0988MEHGDt2rOPtUFxcjDFjxmDXrl0uC60No9GIkJAQZGVlYe3atYiPj3fagSVZ5xuuMej1ephMJgDA9OnTYTQaMXv2bHzxxRdYunQp5syZ06g3zfnz5zFt2jSkpKRAr9dj3rx5WLBgATw8PFyuo7i4GGvWrEF5eTm8vb0xZcqUugcQWQZMdqNL8TGQt78H7ZHngLNZ0J59FbqNy4Af3zQ8lwNt+nxg1wFAr4P0/JOQF8wAPFzcAW+IvgZiMBhgMplgMpmwcOFCmEwmvPrqq3j33XcRFxeHSZMmQZIkAEBGRgaCg4Nr6NA0DQcOHAAA+Pv7w8fHx6W2dQsWLFhQX6Hjx49j06ZN0Ov1GDVqFIKCglBUVISkpCQ89thjOHr0KADA09MTqqqiffv2KC4uxvr167Fjxw4UFhbCYrHAZDIhMjISNpsNn376KTZv3oySkhJYrVZ06tQJgYGBsNls2Lp1K9LS0nD58mXHSFJQUICXX34ZK1euhKZpkGUZfn5+8PX1RUBAgOMHcpXc3Fx8+OGH2LFjB27cuAEfHx9cuXIFoaGhsFgsiIuLww8//IDU1FTs2rULmqbBYrEgODgYZ86cwT//+U8cOHAABw4cwJ49e6AoCry9vXH8+HEcPnwY3t7ejld8RkYGEhISkJ6eDkmSMGzYMMTHxyMtLQ0HDx5EamoqXnnlFZw9exaDBg2qVfOJEyfw+OOPY8eOHQgICMC4ceMcAxcAoKIS2sZtwPZ9wLkcwGwCbDaAhNQ6EFJgS0jtw8GNXwLncsALFyH9+Bmt3T8BOJ0JSBKkoX2A+BgwLR08eBz89ii0V5YDZ7MgDUpwSV9gYGBNfQ3k1KlT+Pjjj5GSkoKKigpYrVZcvHgRkZGR8PDwQEJCAo4dO4b09HSkpKQAAFq1aoVz586hd+/eWLduHWJjY2GxWFBeXo7r16/jww8/xGuvvQabzYZp06ZhxIgRrolxZaJz+xKrLMu0WCyOIx1eXl4MDg52TL50Oh137tzJVatWOS3jAWBoaCgLCwu5devWGkdLxo0bR9I+sf/DH/7gWEY2GAz08fFxtFe9BFudgoKC+P3337s4dbzFxIkT7zh5TExMdJS5ceMGhw8f7siLi4vj9evXmZCQUO/Oc0JCgqOeffv21VseANu3b1+n5hUrVlCWZYaGhjIvL69Gvvb5LiqmzjUn+m0GUPvhxwUURbHvqxhjf1wxi6a64sO6TwdUp/ZDG6WvoVQfKbo9SZLE5557zlGmsLCQ9957ryP/kUce4cmTJx3PpiRJ9PLyotVqdTxLADhw4EBevXrVZS0ufZL5+/tj8+bNmD9/Pnbt2oWSkhJ4eXkhOjoac+fOxVdffYX9+/cDsL9lIiMjERQUhLFjx6KiosJRT9euXeHl5YW4uDg8/vjjuHbtmiPvkUceAWCf2M+fP98xGb5w4QIqKythsVgwaNAgjBo1Cm+++SYA+2S9T58+NRYHXOHRRx9FSUkJNE1zXDMYDJg6darj3xaLBUuWLIHZbIaiKHj44Yfh7e2NadOmISAgoM5Fjoceesjx7xYtWmDkyJH1agoMDKw1jyS2b98OTdPwm9/8Bq1bt65ZKD4a0qMj7JN7hxgAvbvdmuTrdJCnPALtfC6QlQe0C4XUPQYYMbBefQisfS7jkr4GMnHiRKcFI8B++HbixImOf/v5+eGNN97A22+/DVmWMWnSJERHR2Pnzp1YtmwZjhw5guvXr0NRFJhMJrRq1QrDhw/HM888A29vb5e1SKztrt8BkigvL4eiKNDpdPD09HT7U8gdVFVFeXk5NE2DwWCA2Wxu1vZ+zly5cgVdunRBRUUFjhw5gnbt2tUf9BPyc9dXUVEBm80GkpBlGSaTCQaDwe163DreL0lSDac3Jzqdzi33/yezf/9+FBUVYfHixXflTxrq4+euz2w2u36Evw7EH5D9AiCJ9PR0xMTEYOrUqT+7t+zPXV9T4tYnmeDuUVJSgpKSEgQHB/8sH8ifu76mQhhGIHAD8UkmELiBMIxA4AbCMAKBGwjDCARu8P8AwTGFHy8pXhYAAAAASUVORK5CYII=)
